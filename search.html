<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Search Card</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

  <div class="container-fluid" style="background-color:#eba0ad;">
    <div class="row p-3">
      <div class="col">
        <h3 class="text-light mb-0">Deck of Cards</h3>
      </div>
      <div class="col text-end">
        <a href="index.html" class="btn btn-secondary">Back</a>
      </div>
    </div>
  </div>

  <div class="container my-4">
    <div class="row g-2">
      <div class="col-10">
        <input type="text"
               placeholder="Enter value or suit (e.g. ace, hearts)"
               class="form-control rounded-5"
               id="searchInput">
      </div>
      <div class="col-2">
        <button class="btn btn-info rounded-5 w-100" onclick="searchCard()">Go</button>
      </div>
    </div>
  </div>

  <div class="container my-3">
    <div class="row" id="contentArea"></div>
  </div>

  <script>
    const contentArea = document.getElementById("contentArea");
    const searchInput = document.getElementById("searchInput");

    async function searchCard() {
      const query = searchInput.value.trim().toLowerCase();

      if (!query) {
        alert("Please enter a value or suit");
        return;
      }

      contentArea.innerHTML = "<p class='text-center'>Searching...</p>";

      try {
        const response = await fetch(
          "https://deckofcardsapi.com/api/deck/new/draw/?count=52"
        );
        const data = await response.json();

        const results = data.cards.filter(card =>
          card.value.toLowerCase().includes(query) ||
          card.suit.toLowerCase().includes(query)
        );

        contentArea.innerHTML = "";

        if (results.length === 0) {
          contentArea.innerHTML = "<p class='text-center'>No card found.</p>";
          return;
        }

        results.forEach(card => {
          contentArea.innerHTML += `
            <div class="col-12 col-md-6 col-lg-4">
              <div class="card p-4 my-3 text-center shadow-sm rounded-4">
                <img src="${card.image}"
                     class="img-fluid mx-auto mb-2"
                     style="height:200px; object-fit:contain;">
                <h5 class="mt-2">${card.value} of ${card.suit}</h5>
              </div>
            </div>
          `;
        });

      } catch (error) {
        console.error(error);
        contentArea.innerHTML =
          "<p class='text-danger text-center'>Error loading cards.</p>";
      }
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
